<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Set or return list of registered file formats that we can read — fileformats • nat</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">nat</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Installation.html">Installation Details</a>
    </li>
    <li>
      <a href="../articles/neurons-intro.html">Introduction to neurons and neuronlists</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jefferis/nat">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Set or return list of registered file formats that we can read</h1>
    </div>

    
    <p><code>fileformats</code> returns format names, a format definition 
  list or a table of information about the formats that match the given 
  filter conditions.

    <code>registerformat</code> registers a format in the io registry

    <code>getformatreader</code> gets the function to read a file

    <code>getformatwriter</code> gets the function to write a file</p>
    

    <pre class="usage"><span class='fu'>fileformats</span>(<span class='kw'>format</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ext</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>read</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>write</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>class</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>rval</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"names"</span>, <span class='st'>"info"</span>, <span class='st'>"all"</span>))

<span class='fu'>registerformat</span>(<span class='kw'>format</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ext</span> <span class='kw'>=</span> <span class='no'>format</span>, <span class='kw'>read</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>write</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>magic</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>magiclen</span> <span class='kw'>=</span> <span class='fl'>NA_integer_</span>, <span class='kw'>class</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>getformatreader</span>(<span class='no'>file</span>, <span class='kw'>class</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>getformatwriter</span>(<span class='kw'>format</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>file</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ext</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>class</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>format</th>
      <td><p>Character vector naming the format</p></td>
    </tr>
    <tr>
      <th>ext</th>
      <td><p>Character vector of file extensions (including periods)</p></td>
    </tr>
    <tr>
      <th>read, write</th>
      <td><p>Functions to read and write this format</p></td>
    </tr>
    <tr>
      <th>class</th>
      <td><p>The S3 class for the format (character vector e.g. 'neuron')</p></td>
    </tr>
    <tr>
      <th>rval</th>
      <td><p>Character vector choosing what kind of return value 
<code>fileformats</code> will give.</p></td>
    </tr>
    <tr>
      <th>magic</th>
      <td><p>Function to test whether a file is of this format</p></td>
    </tr>
    <tr>
      <th>magiclen</th>
      <td><p>Optional integer specifying maximum number of bytes required 
from file header to determine file's type.</p></td>
    </tr>
    <tr>
      <th>file</th>
      <td><p>Path to a file</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    
<ul>
<li><p><code>fileformats</code> returns a character vector, matrix or list 
  according to the value of rval.</p></li>
<li><p><code>getformatreader</code> returns a list. The reader can be accessed 
  with <code>$read</code> and the format can be acessed by <code>$format</code>.</p></li>
<li><p><code>getformatwriter</code> returns a list. The writer can be accessed 
  with <code>$write</code>.</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>if a <code>format</code> argument is passed to <code>fileformats</code> it will
  be matched wigth partial string matching and iif a unique match exists that
  will be returned.
    <code>getformatreader</code> starts by reading a set number of bytes from 
  the start off the current file and then checks using file extension and 
  magic functions to see if it can identify the file. Presently formats are 
  in a queue in alphabetical order, dispatching on the first match.</p>
    
    <h2 class="hasAnchor" id="getformatwriter-output-file"><a class="anchor" href="#getformatwriter-output-file"></a>getformatwriter output file</h2>

    <p>If <code>getformatwriter</code> is passed a 
  <code>file</code> argument, it will be processed based on the registered 
  fileformats information and the <code>ext</code> argument to give a final output 
  path in the <code>$file</code> element of the returned <code>list</code>.</p>  
<p>If <code>ext='.someext'</code> <code>getformatwriter</code> will use the specified 
  extension to overwrite the default value returned by <code>fileformats</code>.</p>  
<p>If <code>ext=NULL</code>, the default, and <code>file='somefilename.someext'</code>
  then <code>file</code> will be untouched and <code>ext</code> will be set to
  <code>'someext'</code> (overriding the value returned by <code>fileformats</code>).</p>  
<p>If <code>file='somefile_without_extension'</code> then the suppplied or 
  calculated extension will be appended to <code>file</code>.</p>  
<p>If <code>ext=NA</code> then the input <code>file</code> name will not be touched (even 
  if it has no extension at all).</p>  
<p>Note that if <code>ext=NULL</code> or <code>ext=NA</code>, then only the specified 
  format or, failing that, the <code>file</code> extension will be used to query 
  the fileformats database for a match.</p>  
<p>See <code><a href='write.neuron.html'>write.neuron</a></code> for code to make this discussion more 
  concrete.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='write.neuron.html'>write.neuron</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># information about the currently registered file formats</span>
<span class='fu'>fileformats</span>(<span class='kw'>rval</span><span class='kw'>=</span><span class='st'>'info'</span>)</div><div class='output co'>#&gt;            format     class            ext  read write magic
#&gt; 1  amiralandmarks landmarks .landmarkAscii  TRUE  TRUE  TRUE
#&gt; 2  amiralandmarks landmarks   .landmarkBin  TRUE  TRUE  TRUE
#&gt; 3  amiralandmarks landmarks            .am  TRUE  TRUE  TRUE
#&gt; 4  amiralandmarks landmarks     .amiramesh  TRUE  TRUE  TRUE
#&gt; 5       amiramesh      im3d            .am  TRUE  TRUE  TRUE
#&gt; 6       amiramesh      im3d     .amiramesh  TRUE  TRUE  TRUE
#&gt; 7   cmtklandmarks landmarks     .landmarks  TRUE  TRUE  TRUE
#&gt; 8   fijilandmarks landmarks        .points  TRUE  TRUE  TRUE
#&gt; 9      fijitraces    neuron        .traces  TRUE FALSE  TRUE
#&gt; 10     fijitraces    neuron           .xml  TRUE FALSE  TRUE
#&gt; 11      hxlineset    neuron            .am  TRUE  TRUE  TRUE
#&gt; 12         hxskel    neuron            .am  TRUE  TRUE  TRUE
#&gt; 13         hxsurf    hxsurf          .surf  TRUE  TRUE  TRUE
#&gt; 14         hxsurf    hxsurf            .am  TRUE  TRUE  TRUE
#&gt; 15         hxsurf    hxsurf     .amiramesh  TRUE  TRUE  TRUE
#&gt; 16        neuroml    neuron           .xml  TRUE FALSE  TRUE
#&gt; 17        neuroml    neuron           .nml  TRUE FALSE  TRUE
#&gt; 18           nrrd      im3d          .nrrd  TRUE  TRUE  TRUE
#&gt; 19           nrrd      im3d          .nhdr  TRUE  TRUE  TRUE
#&gt; 20            rds    neuron           .rds  TRUE  TRUE FALSE
#&gt; 21            swc    neuron           .swc  TRUE  TRUE FALSE
#&gt; 22          swcng    ngraph           .swc  TRUE FALSE FALSE
#&gt; 23       vaa3draw      im3d           .v3d  TRUE FALSE  TRUE
#&gt; 24       vaa3draw      im3d        .v3draw  TRUE FALSE  TRUE
#&gt; 25            vtk    neuron           .vtk FALSE  TRUE FALSE</div><span class='co'># NOT RUN {</span>
<span class='fu'>registerformat</span>(<span class='st'>"swc"</span>,<span class='kw'>read</span><span class='kw'>=</span><span class='no'>read.swc</span>,<span class='kw'>write</span><span class='kw'>=</span><span class='no'>read.swc</span>,<span class='kw'>magic</span><span class='kw'>=</span><span class='no'>is.swc</span>,<span class='kw'>magiclen</span><span class='kw'>=</span><span class='fl'>10</span>,
  <span class='kw'>class</span><span class='kw'>=</span><span class='st'>'neuron'</span>)
<span class='co'># }</span><div class='input'><span class='no'>swc</span><span class='kw'>=</span><span class='fu'>tempfile</span>(<span class='kw'>fileext</span> <span class='kw'>=</span> <span class='st'>'.swc'</span>)
<span class='fu'><a href='write.neuron.html'>write.neuron</a></span>(<span class='no'>Cell07PNs</span><span class='kw'>[[</span><span class='fl'>1</span>]], <span class='no'>swc</span>)
<span class='fu'>stopifnot</span>(<span class='fu'>isTRUE</span>(<span class='fu'>getformatreader</span>(<span class='no'>swc</span>)$<span class='no'>format</span><span class='kw'>==</span><span class='st'>'swc'</span>))
<span class='fu'>unlink</span>(<span class='no'>swc</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#getformatwriter-output-file">getformatwriter output file</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Gregory Jefferis, James Manton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
